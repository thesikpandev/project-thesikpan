# 더식판 서비스 기능리스트

## ⚠️ 중요: 기능 우선순위

### 🔴 필수 기능 (Core Features)
사업 성공을 위해 반드시 완벽하게 구현되어야 하는 핵심 기능입니다.

### 🟡 선택 기능 (Optional Features)  
필수 기능 완료 후 추가 구현 가능한 부가 기능입니다.

## 1. 🔴 [필수] 인증/권한 관리

### 1.1 로그인/로그아웃
- [ ] F-AUTH-001: 이메일/비밀번호 로그인
- [ ] F-AUTH-002: 자동 로그인 (Remember Me)
- [ ] F-AUTH-003: 비밀번호 찾기
- [ ] F-AUTH-004: 비밀번호 재설정
- [ ] F-AUTH-005: 로그아웃
- [ ] F-AUTH-006: 세션 타임아웃 처리

### 1.2 회원가입
- [ ] F-AUTH-007: 학부모 회원가입
- [ ] F-AUTH-008: 본인인증 (휴대폰/아이핀)
- [ ] F-AUTH-009: 이메일 중복 확인
- [ ] F-AUTH-010: 약관 동의
- [ ] F-AUTH-011: 가입 완료 안내

### 1.3 권한 관리
- [ ] F-AUTH-012: 역할별 메뉴 접근 제어
- [ ] F-AUTH-013: 데이터 조회 권한 제어
- [ ] F-AUTH-014: 기능 실행 권한 제어
- [ ] F-AUTH-015: IP 기반 접근 제한 (관리자)

## 2. 🔴 [필수] 대시보드 (기본 기능만)

### 2.1 본사 대시보드
- [ ] F-DASH-001: 전체 가입자 수 표시
- [ ] F-DASH-002: 월 매출 현황 차트
- [ ] F-DASH-003: 센터별 현황 요약
- [ ] F-DASH-004: 미납 현황 위젯
- [ ] F-DASH-005: 최근 상담 내역

### 2.2 세척센터 대시보드
- [ ] F-DASH-006: 지역 가입자 수 표시
- [ ] F-DASH-007: 배송센터별 현황
- [ ] F-DASH-008: 지역 매출 차트
- [ ] F-DASH-009: 오늘의 작업 현황

### 2.3 배송센터 대시보드
- [ ] F-DASH-010: 교육기관별 현황
- [ ] F-DASH-011: 오늘의 배송 일정
- [ ] F-DASH-012: 수거 현황
- [ ] F-DASH-013: 긴급 알림

### 2.4 교육기관 대시보드
- [ ] F-DASH-014: 반별 이용 인원
- [ ] F-DASH-015: 오늘의 서비스 현황
- [ ] F-DASH-016: 공지사항

### 2.5 학부모 대시보드
- [ ] F-DASH-017: 자녀 정보 표시
- [ ] F-DASH-018: 이번 달 결제 상태
- [ ] F-DASH-019: 서비스 이용 내역

## 3. 🔴 [필수] 회원 관리 (본사 중앙 입력)

### 3.1 회원 목록
- [ ] F-USER-001: 센터별 회원 목록 조회
- [ ] F-USER-002: 회원 검색 (이름, 연락처, 교육기관)
- [ ] F-USER-003: 회원 상태 필터링
- [ ] F-USER-004: 엑셀 다운로드
- [ ] F-USER-005: 페이징 처리

### 3.2 회원 상세
- [ ] F-USER-006: 회원 기본정보 조회
- [ ] F-USER-007: 자녀 정보 조회
- [ ] F-USER-008: 결제 이력 조회
- [ ] F-USER-009: 상담 이력 조회 (채널톡 연동)
- [ ] F-USER-010: 서비스 이용 내역

### 3.3 회원 등록/수정 (센터 담당자)
- [ ] F-USER-011: 신규 회원 등록 (센터별)
- [ ] F-USER-012: 회원 정보 수정
- [ ] F-USER-013: 자녀 추가/삭제
- [ ] F-USER-014: 교육기관 변경
- [ ] F-USER-015: 서비스 상태 변경
- [ ] F-USER-016: CMS 출금동의서 업로드
- [ ] F-USER-017: 나이스페이 API 자동 연동

### 3.4 회원 관리 기능
- [ ] F-USER-018: 일괄 상태 변경
- [ ] F-USER-019: 일괄 문자 발송
- [ ] F-USER-020: 휴면 회원 처리
- [ ] F-USER-021: 탈퇴 처리

## 4. 🔴 [필수] 조직 관리 (대리점 관계)

### 4.1 조직도 관리
- [ ] F-ORG-001: 조직도 트리 뷰
- [ ] F-ORG-002: 조직 검색
- [ ] F-ORG-003: 조직 생성
- [ ] F-ORG-004: 조직 수정
- [ ] F-ORG-005: 조직 삭제 (하위 조직 체크)

### 4.2 세척센터 관리
- [ ] F-ORG-006: 세척센터 목록
- [ ] F-ORG-007: 세척센터 등록
- [ ] F-ORG-008: 세척센터 정보 수정
- [ ] F-ORG-009: 담당 지역 설정
- [ ] F-ORG-010: 관리자 계정 발급

### 4.3 배송센터 관리
- [ ] F-ORG-011: 배송센터 목록
- [ ] F-ORG-012: 배송센터 등록
- [ ] F-ORG-013: 배송센터 정보 수정
- [ ] F-ORG-014: 상위 세척센터 연결
- [ ] F-ORG-015: 배송 구역 설정

### 4.4 교육기관 관리
- [ ] F-ORG-016: 교육기관 목록
- [ ] F-ORG-017: 교육기관 등록
- [ ] F-ORG-018: 교육기관 정보 수정
- [ ] F-ORG-019: 반 정보 관리
- [ ] F-ORG-020: 서비스 일정 설정

## 5. 🔴 [필수] 자동이체 관리 (나이스페이 CMS API 연동)

### 5.1 증빙파일 관리
- [ ] F-PAY-001: 출금동의서 업로드 (multipart/form-data)
- [ ] F-PAY-002: 출금동의서 Base64 업로드
- [ ] F-PAY-003: 증빙파일 삭제
- [ ] F-PAY-004: 파일명 규칙 검증 (기관코드.회원ID.구분.확장자)
- [ ] F-PAY-005: 파일 크기 검증 (300KB/10KB)

### 5.2 회원등록 프로세스
- [ ] F-PAY-006: 회원등록 요청 (D-1 12시 전)
- [ ] F-PAY-007: 회원정보 수정 (일반정보만)
- [ ] F-PAY-008: 회원 해지 처리
- [ ] F-PAY-009: 등록 결과 조회 (D+1 13시 이후)
- [ ] F-PAY-010: 계좌/카드 실명 인증

### 5.3 출금신청 프로세스
- [ ] F-PAY-011: 출금신청 요청 (D-1 17시 전)
- [ ] F-PAY-012: 출금신청 조회
- [ ] F-PAY-013: 출금 대기건 삭제 (D-1 17시 전)
- [ ] F-PAY-014: 카드 승인 취소
- [ ] F-PAY-015: 다계좌 분할입금 설정

### 5.4 출금 결과 처리
- [ ] F-PAY-016: 은행 출금 결과 조회 (D+1 13시)
- [ ] F-PAY-017: 카드 승인 결과 조회 (D-Day)
- [ ] F-PAY-018: 카드 수수료 조회 (D+1 13시)
- [ ] F-PAY-019: 출금 상태 자동 업데이트
- [ ] F-PAY-020: 실패 건 재처리

### 5.5 정산 상태 조회
- [ ] F-PAY-021: 정산 예정일 조회
- [ ] F-PAY-022: 실제 정산일 조회
- [ ] F-PAY-023: 정산 상태 확인 (대기/완료/중지)
- [ ] F-PAY-024: 은행별 정산일 차이 처리
- [ ] F-PAY-025: 정산 지연 알림

### 5.6 결과 확인 시스템 (Single Source of Truth: 우리 DB)
- [ ] F-PAY-026: Vercel Cron 스케줄러 설정 (하루 1회만)
- [ ] F-PAY-027: 출금 결과 확인 (D+1 13시 한 번만)
- [ ] F-PAY-028: 은행 직접 해지건 확인 (D+1 13시)
- [ ] F-PAY-029: 정산 상태 확인 (주 1회)
- [ ] F-PAY-030: 우리 DB 기준 모든 데이터 관리
- [ ] F-PAY-031: 나이스페이는 결과 확인용만 사용

### 5.7 시간 제약 관리
- [ ] F-PAY-032: 영업일 판단 로직
- [ ] F-PAY-033: 12시/17시 마감 시간 체크
- [ ] F-PAY-034: 주말/공휴일 처리
- [ ] F-PAY-035: 시간대별 프로세스 자동화

### 5.8 미납 관리 (색상 구분)
- [ ] F-PAY-036: 미납자 목록 (1개월: 노란색)
- [ ] F-PAY-037: 미납자 목록 (2개월: 초록색)
- [ ] F-PAY-038: 미납자 목록 (3개월+: 빨간색)
- [ ] F-PAY-039: 미납 알림 자동 발송
- [ ] F-PAY-040: 수동 입금 처리
- [ ] F-PAY-041: 재출금 일괄 처리

### 5.9 납부 이력
- [ ] F-PAY-042: 회원별 납부 이력
- [ ] F-PAY-043: 납부 증명서 발급
- [ ] F-PAY-044: 환불 처리
- [ ] F-PAY-045: 카드 매출전표 조회 링크
- [ ] F-PAY-046: 이력 엑셀 다운로드

## 6. 🔴 [필수] 통계정산 관리

### 6.1 통계 현황
- [ ] F-STAT-001: 가입자 현황 (세척센터별)
- [ ] F-STAT-002: 가입자 현황 (배송센터별)
- [ ] F-STAT-003: 교육기관별 가입자 분포
- [ ] F-STAT-004: 반별 세부 현황
- [ ] F-STAT-005: 월 매출 현황 (표/그래프)
- [ ] F-STAT-006: 센터별 매출 비교
- [ ] F-STAT-007: 전월 대비 증감

### 6.2 정산 처리
- [ ] F-SETTLE-001: 월별 정산 생성
- [ ] F-SETTLE-002: 센터별 수수료 계산
- [ ] F-SETTLE-003: 정산 확정 처리
- [ ] F-SETTLE-004: 정산 수정
- [ ] F-SETTLE-005: 정산 취소

### 6.3 정산 달력
- [ ] F-SETTLE-006: 달력 뷰 표시
- [ ] F-SETTLE-007: 정산 일정 표시
- [ ] F-SETTLE-008: 정산 상태 표시
- [ ] F-SETTLE-009: 정산 알림 설정

### 6.4 정산 조회
- [ ] F-SETTLE-010: 본사 전체 정산
- [ ] F-SETTLE-011: 세척센터별 정산
- [ ] F-SETTLE-012: 배송센터별 정산
- [ ] F-SETTLE-013: 교육기관별 정산
- [ ] F-SETTLE-014: 기간별 정산 조회

### 6.5 정산 보고서
- [ ] F-SETTLE-015: 정산 상세 내역서
- [ ] F-SETTLE-016: 세금계산서 발행
- [ ] F-SETTLE-017: 정산 보고서 출력
- [ ] F-SETTLE-018: 정산 데이터 엑셀

## 7. 🟡 [선택] 고급 통계 분석

### 7.1 성장률 분석
- [ ] F-STAT-008: 전년 동기 대비 성장률
- [ ] F-STAT-009: 분기별 추이 분석
- [ ] F-STAT-010: 매출 예측 모델

### 7.2 이탈률 분석
- [ ] F-STAT-011: 해지 원인 분석
- [ ] F-STAT-012: 재가입률 추적
- [ ] F-STAT-013: 고객 생애 가치 (LTV)

### 7.3 결제 패턴 분석
- [ ] F-STAT-014: 결제 수단별 성공률
- [ ] F-STAT-015: 미납 패턴 분석
- [ ] F-STAT-016: 재결제율

## 8. 부가 기능

### 8.1 🔴 [필수] 라벨 출력
- [ ] F-ETC-001: 배송 라벨 생성
- [ ] F-ETC-002: 식판 라벨 생성
- [ ] F-ETC-003: 라벨 템플릿 관리
- [ ] F-ETC-004: 일괄 라벨 출력
- [ ] F-ETC-005: 라벨 미리보기

### 8.2 🔴 [필수] 단체 문자 (윙고 iframe)
- [ ] F-ETC-006: 윙고 iframe 임베드
- [ ] F-ETC-007: 수신 대상 선택
- [ ] F-ETC-008: 문자 내용 작성
- [ ] F-ETC-009: 예약 발송
- [ ] F-ETC-010: 발송 이력 조회

### 8.3 🔴 [필수] 카카오톡 채널 연동
- [ ] F-ETC-011: 카카오채널 API 연동
- [ ] F-ETC-012: 상담 이력 자동 저장
- [ ] F-ETC-013: FAQ 챗봇 연동
- [ ] F-ETC-014: 상담원 자동 배정
- [ ] F-ETC-015: 상담 통계

### 8.4 🟡 [선택] 공지사항
- [ ] F-ETC-016: 공지사항 등록
- [ ] F-ETC-017: 공지사항 수정/삭제
- [ ] F-ETC-018: 중요 공지 설정
- [ ] F-ETC-019: 대상별 공지
- [ ] F-ETC-020: 읽음 확인

## 9. 🔴 [필수] 학부모 전용 페이지 (단순화)

### 9.1 학부모 페이지
- [ ] F-HELP-001: 로그인 (휴대폰 인증)
- [ ] F-HELP-002: 정기 결제 내역 확인
  - [ ] F-HELP-002-1: 월별 결제 상태 (완료/대기/미납)
  - [ ] F-HELP-002-2: 결제 금액
  - [ ] F-HELP-002-3: 결제일
  - [ ] F-HELP-002-4: 최근 6개월 내역

### 9.2 🟡 [선택] 사용자 가이드
- [ ] F-HELP-003: 센터용 운영 매뉴얼
- [ ] F-HELP-004: 교육기관용 가이드
- [ ] F-HELP-005: 학부모용 이용 가이드
- [ ] F-HELP-006: 동영상 튜토리얼

## 10. 🟡 [선택] 시스템 관리

### 10.1 사용자 관리
- [ ] F-SYS-001: 관리자 계정 생성
- [ ] F-SYS-002: 권한 그룹 관리
- [ ] F-SYS-003: 접속 이력 조회
- [ ] F-SYS-004: 비밀번호 정책
- [ ] F-SYS-005: 2단계 인증

### 10.2 코드 관리
- [ ] F-SYS-006: 공통 코드 관리
- [ ] F-SYS-007: 지역 코드 관리
- [ ] F-SYS-008: 교육기관 유형 관리
- [ ] F-SYS-009: 서비스 상태 코드

### 10.3 시스템 설정
- [ ] F-SYS-010: 서비스 금액 설정
- [ ] F-SYS-011: 수수료율 설정
- [ ] F-SYS-012: 출금일 설정
- [ ] F-SYS-013: 시스템 공휴일 관리
- [ ] F-SYS-014: 배치 작업 관리

### 10.4 로그 관리
- [ ] F-SYS-015: 시스템 로그 조회
- [ ] F-SYS-016: 에러 로그 조회
- [ ] F-SYS-017: API 호출 로그
- [ ] F-SYS-018: 데이터 변경 이력
- [ ] F-SYS-019: 로그 다운로드

### 10.5 백업/복구
- [ ] F-SYS-020: 자동 백업 설정
- [ ] F-SYS-021: 수동 백업 실행
- [ ] F-SYS-022: 백업 이력 조회
- [ ] F-SYS-023: 데이터 복구

## 11. 🔴 [필수] 외부 연동

### 11.1 PG 연동
- [ ] F-API-001: 나이스페이 CMS API 연동
- [ ] F-API-002: 출금 파일 전송
- [ ] F-API-003: 결과 파일 수신
- [ ] F-API-004: 실시간 상태 조회

### 11.2 문자 발송
- [ ] F-API-005: 윙고 API 연동
- [ ] F-API-006: SMS 발송
- [ ] F-API-007: LMS 발송
- [ ] F-API-008: 발송 결과 수신

### 11.3 카카오 연동
- [ ] F-API-009: 카카오채널 API 연동
- [ ] F-API-010: 알림톡 발송
- [ ] F-API-011: 친구톡 발송
- [ ] F-API-012: 상담 메시지 수신

## 13. 🔴 [필수] 홈페이지 연동

### 13.1 온라인 신청
- [ ] F-WEB-001: 서비스 신청 폼
- [ ] F-WEB-002: 교육기관 검색/선택
- [ ] F-WEB-003: 반 선택
- [ ] F-WEB-004: 결제 정보 입력
- [ ] F-WEB-005: 약관 동의

### 13.2 자동 처리
- [ ] F-WEB-006: 신청 데이터 검증
- [ ] F-WEB-007: 나이스페이 API 자동 호출
- [ ] F-WEB-008: 계좌/카드 실시간 검증
- [ ] F-WEB-009: 회원 자동 등록
- [ ] F-WEB-010: 센터 자동 배정
- [ ] F-WEB-011: 신청 완료 알림 (문자/이메일)

### 13.3 신청 조회
- [ ] F-WEB-012: 신청번호 조회
- [ ] F-WEB-013: 처리 상태 확인
- [ ] F-WEB-014: 반려 사유 안내
- [ ] F-WEB-015: 재신청 프로세스

## 14. 🔴 [필수] 나이스페이 CMS API 상세 구현

### 14.1 환경 설정
- [ ] F-NICE-001: 테스트/운영 서버 분리 설정
- [ ] F-NICE-002: API Key 관리 (환경변수)
- [ ] F-NICE-003: 이용기관코드 설정
- [ ] F-NICE-004: 방화벽 설정 (포트 7080/4435)
- [ ] F-NICE-005: HTTPS 통신 설정

### 14.2 증빙파일 API
- [ ] F-NICE-006: multipart/form-data 전송
- [ ] F-NICE-007: Base64 인코딩 전송
- [ ] F-NICE-008: 파일명 규칙 검증
- [ ] F-NICE-009: 파일 크기 제한 체크
- [ ] F-NICE-010: 증빙파일 삭제 (DELETE)

### 14.3 회원등록 API
- [ ] F-NICE-011: 신규 등록 (POST, D-1 12시 전)
- [ ] F-NICE-012: 회원 조회 (GET)
- [ ] F-NICE-013: 회원 수정 (POST /modify)
- [ ] F-NICE-014: 회원 해지 (DELETE)
- [ ] F-NICE-015: 은행 등록 결과 처리

### 14.4 출금신청 API
- [ ] F-NICE-016: 출금 신청 (POST, D-1 17시 전)
- [ ] F-NICE-017: 출금 조회 (GET)
- [ ] F-NICE-018: 대기건 삭제 (DELETE)
- [ ] F-NICE-019: 카드 취소 (POST /cancel)
- [ ] F-NICE-020: 다계좌 분할입금 처리

### 14.5 정산 API
- [ ] F-NICE-021: 정산 상태 조회 (GET)
- [ ] F-NICE-022: 정산 예정일 확인
- [ ] F-NICE-023: 실제 정산일 처리
- [ ] F-NICE-024: 정산 상태별 처리
- [ ] F-NICE-025: 수수료 정산 확인

### 14.6 변경/해지 조회
- [ ] F-NICE-026: 일자별 변경내역 조회
- [ ] F-NICE-027: 일자별 해지내역 조회
- [ ] F-NICE-028: 은행 직접 변경건 처리
- [ ] F-NICE-029: 통합관리시스템 변경건 처리
- [ ] F-NICE-030: 자동 동기화

### 14.7 에러 코드 처리
- [ ] F-NICE-031: 증빙파일 에러 (E001~E999)
- [ ] F-NICE-032: 회원등록 에러 (1001~9999)
- [ ] F-NICE-033: 출금신청 에러 (1001~9999)
- [ ] F-NICE-034: 정산조회 에러 (4001~4003)
- [ ] F-NICE-035: 401 Unauthorized 처리

### 14.8 시간 제약 로직
- [ ] F-NICE-036: 12시 마감 체크 (회원등록)
- [ ] F-NICE-037: 17시 마감 체크 (출금신청)
- [ ] F-NICE-038: D+1 13시 결과 조회
- [ ] F-NICE-039: 영업일 계산 로직
- [ ] F-NICE-040: 테스트 서버 20분 대기

---

## 개발 우선순위

### Phase 1 (🔴 필수 기능 - 2.5개월)
**반드시 완벽하게 구현되어야 하는 핵심 기능**
1. 인증/권한 관리
2. 회원 관리 (본사 중앙 입력)
3. 조직 관리
4. 나이스페이 CMS API 연동
   - 시간 제약 준수 (D-1 12시, 17시)
   - 증빙파일 처리
   - Polling 시스템
5. 미납 관리 (색상 구분)
6. 통계정산 시스템
   - 가입자 현황 (센터별/원별/반별)
   - 월 매출 현황 (표/그래프)
   - 정산 처리
7. 학부모 페이지 (정기 결제 내역만)
8. 필수 부가 기능
   - 라벨 출력
   - 단체 문자 (윙고 iframe)
   - 카카오톡 채널 연동
9. 홈페이지 연동 (온라인 신청)

### Phase 2 (🟡 선택 기능 - 0.5개월)
**필수 기능 완료 후 구현**
1. 고급 통계 분석
2. 고급 대시보드
3. 공지사항 기능
4. 시스템 관리

### Phase 3 (테스트 및 안정화 - 1개월)
1. 필수 기능 집중 테스트
2. 나이스페이 API 안정성 검증
3. 시간 제약 로직 검증
4. 사용자 인수 테스트